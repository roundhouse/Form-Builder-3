var UtilityItem=void 0;UtilityItem=Garnish.Base.extend({$container:null,$btn:null,$loader:null,$badgeContainer:null,$countContainer:null,$menuContainer:null,type:null,count:0,init:function(t){this.$container=$(t),this.type=this.$container.data("type"),this.$btn=this.$container.find(".icon"),this.$loader=this.$container.find(".loader"),this.$badgeContainer=this.$container.find(".fb-badge"),this.$countContainer=this.$badgeContainer.find(".count"),this.$menuContainer=this.$container.find(".utility-menu"),"unread"==this.type&&this.getUnreadCount(),"notifications"==this.type&&this.getNotifications(),this.addListener(this.$btn,"click",this.toggleMenu)},getUnreadCount:function(){var t=this;Craft.postActionRequest("form-builder/entries/get-unread-entries",$.proxy(function(n,i){"success"===i&&(n.totalCount>0?(t.$badgeContainer.addClass("show"),t.$countContainer.html(n.totalCount),t.$menuContainer.find(".body").html(n.template)):t.$menuContainer.find(".body").html('<p class="no-content">'+Craft.t("form-builder","No unread submissions.")+"</p>"))},this))},getNotifications:function(){this.$menuContainer.find(".body").html('<p class="no-content">'+Craft.t("form-builder","No new notifications.")+"</p>")},toggleMenu:function(){this.$container.hasClass("active")?($(".fb-utility-btn").removeClass("active"),$(".utility-menu").removeClass("active"),this.$btn.parent().removeClass("active"),this.$menuContainer.removeClass("active")):($(".fb-utility-btn").removeClass("active"),$(".utility-menu").removeClass("active"),this.$btn.parent().addClass("active"),this.$menuContainer.addClass("active"))}}),Garnish.$doc.ready(function(){var t=this;$.each($(".fb-utility-btn"),function(t,n){new UtilityItem(n)}),$(".fb-mobile-nav").on("click",function(n){$(t).toggleClass("active"),$("body").toggleClass("show-fb-menu")}),$("body").on("click",function(t){target=$(t.target).closest(".utility-menu"),btn=$(t.target).closest(".fb-utility-btn"),0==target.length&&0==btn.length&&($(".fb-utility-btn").removeClass("active"),$(".utility-menu").removeClass("active"))})});