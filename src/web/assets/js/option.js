var Option=void 0;window.Option=Garnish.Base.extend({$container:null,$resultWrapper:null,$resultContainer:null,$toggle:null,$edit:null,$data:null,$inputs:null,enabled:!1,editing:!1,hasModal:!1,hasTags:!1,isTemplate:!1,$enableCheckbox:null,$fields:null,init:function(t){var i=void 0;i=this,this.$container=$(t),this.$resultWrapper=this.$container.find(".option-wrapper"),this.$resultContainer=this.$container.find(".option-result"),this.$toggle=this.$container.find(".option-toggle"),this.$edit=this.$container.find(".option-edit"),this.$container.hasClass("tags")&&(this.hasTags=!0),this.$container.hasClass("is-template")&&(this.isTemplate=!0),this.$inputs=this.$container.data("inputs"),this.$data=this.$container.data("modal"),this.$data&&(this.$fields=this.$data.fields,this.hasModal=!0),this.$inputs&&$.each(this.$inputs,function(t,e){var a=void 0;"checkbox"===e.type?(i.enabled=e.checked,a=e.name,i.$enableCheckbox=$("[name='"+a+"']")):i.enabled=!0}),this.addListener(this.$toggle,"click","toggle"),this.addListener(this.$edit,"click","edit"),this.enabled&&(this.editing=!0,this.$data&&this.$edit.removeClass("hidden"))},toggle:function(t){t.preventDefault(),this.editing=!1,this.$container.hasClass("option-enabled")?(this.$edit.addClass("hidden"),this.$container.removeClass("option-enabled"),this.$resultWrapper.addClass("hidden"),this.$resultContainer.html(""),this.$toggle.html("ENABLE"),this.disableOption()):(this.$edit.removeClass("hidden"),this.$container.addClass("option-enabled"),this.$toggle.html("DISABLE"),this.enableOption(),this.hasModal&&(this.modal?(this.modal.$form.find(".fb-field").removeClass("error"),this.modal.$form[0].reset(),this.modal.show()):this.modal=new OptionModal(this)))},edit:function(t){t.preventDefault();var i=void 0;i=this,this.editing=!0,this.editing&&(this.modal?(this.modal.$form.find(".fb-field").removeClass("error"),$.each(this.$inputs,function(t,e){var a=void 0,n=void 0;"checkbox"!==e.type&&(n=$("[name='"+e.name+"']").val(),console.log(e.name),a=e.name.replace(/[_\W]+/g,"-").slice(0,-1),$.each(i.modal.$modalInputs,function(t,i){var e=void 0;e=$(i),e.hasClass(a)&&e.val(n)}))}),this.modal.show()):this.modal=new OptionModal(this))},disableOption:function(){this.$enableCheckbox.prop("checked",!1)},enableOption:function(){this.$enableCheckbox&&this.$enableCheckbox.prop("checked",!0)},updateHtmlFromModal:function(){var t=void 0;t=this;var i=void 0,e=void 0,a=void 0,n=void 0,s=void 0,o=void 0;this.hasTags?(s=this.$resultContainer.find(".result-item").length,e=s||0,i=$('<div class="result-item" data-result-index="'+e+'">').appendTo(Garnish.$bod),n=$(this.modal.$modalInputs[0]).data("name"),a=$(this.modal.$modalInputs[0]).val(),o=$(this.modal.$modalInputs[1]).val(),$(['<div class="option-result-actions">','<a href="#" class="option-result-delete" title="'+Craft.t("form-builder","Delete")+'"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><path d="M9.521064 18.5182504c-4.973493 0-9.019897-4.0510671-9.019897-9.030471 0-4.98018924 4.046404-9.0312563 9.019897-9.0312563s9.019897 4.05106706 9.019897 9.0312563c0 4.9794039-4.046404 9.030471-9.019897 9.030471zm0-16.05425785c-3.868359 0-7.015127 3.15021907-7.015127 7.02378685 0 3.8727824 3.146768 7.0237869 7.015127 7.0237869 3.86836 0 7.015127-3.1510045 7.015127-7.0237869 0-3.87356778-3.146767-7.02378685-7.015127-7.02378685zm3.167945 10.02870785c-.196085.1955634-.452564.2937378-.708258.2937378-.256479 0-.512958-.0981744-.709042-.2937378L9.521064 10.739699 7.77042 12.4927004c-.196085.1955634-.452564.2937378-.709043.2937378-.256478 0-.512957-.0981744-.708258-.2937378-.391385-.391912-.391385-1.0272965 0-1.4192086l1.750645-1.7530015-1.750645-1.7530015c-.391385-.391912-.391385-1.02729655 0-1.41920862.391385-.39191207 1.025131-.39191207 1.417301 0L9.521064 7.9012817l1.750645-1.75300152c.391385-.39191207 1.025915-.39191207 1.4173 0 .391385.39191207.391385 1.02729662 0 1.41920862l-1.750644 1.7530015 1.750644 1.7530015c.391385.3919121.391385 1.0272966 0 1.4192086z" fill="#8094A1" fill-rule="evenodd"/></svg></a>',"</div>",'<code><span class="option-key input-hint">'+a+"</span> "+o+"</code>",'<input type="hidden" name="'+n+"["+e+'][key]" value="'+a+'" />','<input type="hidden" name="'+n+"["+e+'][value]" value="'+o+'" />'].join("")).appendTo(i),this.$resultContainer.append(i),new Tag(i,this.modal)):(this.isTemplate&&updateTemplateHtml(this.modal,this.$container),this.$resultContainer.html(""),$.each(this.modal.$modalInputs,function(i,e){var a=void 0;o=$(e).val(),o?(n=$(e).data("name"),a=$(e).data("hint"),$("[name='"+n+"']").val(o),t.$resultContainer.append($("<code><span class='input-hint'>"+a+":</span> "+o+"</code>"))):(n=$(e).data("name"),a=$(e).data("hint"),$("[name='"+n+"']").val(""))})),this.$resultWrapper.removeClass("hidden")}}),Garnish.$doc.ready(function(){return $(".option-item").each(function(t,i){return new window.Option(i)})});