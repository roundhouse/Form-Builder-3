var LD=void 0;LD={setup:function(){}},LD=new(Garnish.Base.extend({layoutId:null,formId:null,$settingsBtn:null,init:function(){this.layoutId=null,this.layoutId=null,this.$settingsBtn=$(".fields-settings"),this.addListener(this.$settingsBtn,"click","showFieldsSettings")},setup:function(){},showFieldsSettings:function(){var t=void 0;t=this,modal=new FieldSettingsModal,modal.on("setFieldsSettings",function(i){return t.setFormData(i)}),modal.show()},setFormData:function(t){var i=void 0,s=void 0;i=$("#fieldlayoutsettings"),s="settings[fields][global]",i.html(""),0===Object.keys(t.options).length?$(".fields-settings").removeClass("has-values"):($(".fields-settings").addClass("has-values"),$.each(t.options,function(t,a){i.find('input[name="'+s+"["+t+']"]').length>0?a?i.find('input[name="'+s+"["+t+']"]').val(a):i.find('input[name="'+s+"["+t+']"]').remove():a&&$('<input type="hidden" name="'+s+"["+t+']">').val(a).appendTo(i)}))},getLayoutId:function(){return this.layoutId},getFormId:function(){return this.formId}})),FieldSettingsModal=Garnish.Modal.extend({$formClass:null,$formId:null,$inputClass:null,$inputTemplate:null,$formContainer:null,timeout:null,init:function(){var t=void 0;this.base(),this.$formContainer=$('<form class="modal fitted formbuilder-modal has-sidebar">').appendTo(Garnish.$bod),this.setContainer(this.$formContainer),t=$(['<section class="modal-container">','<div class="modal-sidebar">',"<nav>",'<a href="#" class="modal-nav active" data-target="modal-content-styles"><i class="far fa-clipboard-list"></i> <span class="link-text">Styles</span></a>','<a href="#" class="modal-nav" data-target="modal-content-settings"><i class="far fa-window-alt"></i> <span class="link-text">Settings</span></a>',"</nav>","</div>",'<div class="modal-content-container">','<div class="modal-content modal-content-styles active">',"<header>",'<span class="modal-title">',"Form Attributes","</span>",'<div class="instructions">',"Global form attributes","</div>","</header>",'<div class="body">','<div class="fb-field">','<div class="input-hint">',"CLASS","</div>",'<input type="text" class="text fullwidth global-form-class">',"</div>",'<div class="fb-field">','<div class="input-hint">',"ID","</div>",'<input type="text" class="text fullwidth global-form-id">',"</div>","</div>","</div>",'<div class="modal-content modal-content-settings">',"<header>",'<span class="modal-title">',"Input Settings","</span>",'<div class="instructions">',"Global input settings","</div>","</header>",'<div class="body">','<div class="fb-field">','<div class="input-hint">',"CLASS","</div>",'<input type="text" class="text fullwidth global-input-class">',"</div>",'<div class="fb-field has-spinner">','<div class="spinner hidden"></div>','<div class="input-hint">',"TEMPLATES","</div>",'<input type="text" class="text fullwidth global-input-template">',"</div>","</div>","</div>","</div>","</section>",'<footer class="footer">','<div class="buttons">','<input type="button" class="btns btn-modal cancel" value="'+Craft.t("form-builder","Cancel")+'">','<input type="submit" class="btns btn-modal submit" value="'+Craft.t("form-builder","Save")+'">',"</div>","</footer>"].join("")).appendTo(this.$formContainer),this.$formClass=t.find(".global-form-class"),this.$formId=t.find(".global-form-id"),this.$inputClass=t.find(".global-input-class"),this.$inputTemplate=t.find(".global-input-template"),this.$navLink=t.find(".modal-nav"),this.$cancelBtn=t.find(".cancel"),this.loadModalValues(),this.addListener(this.$cancelBtn,"click","hide"),this.addListener(this.$navLink,"click","toggleModalContent"),this.addListener(this.$inputTemplate,"keyup","checkTemplatePath"),this.addListener(this.$formContainer,"submit","onFormSubmit")},checkTemplatePath:function(){var t=this,i=void 0,s=void 0;i=this.$inputTemplate.parent(),$spinner=i.find(".spinner"),s=i.find(".input-hint"),data={path:this.$inputTemplate.val()},$spinner.removeClass("hidden"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){$spinner.addClass("hidden"),Craft.postActionRequest("form-builder/forms/check-input-template-path",data,$.proxy(function(t,i){t.valid?(s.removeClass("error"),s.addClass("success")):(s.removeClass("success"),s.addClass("error"))},t))},1e3)},loadModalValues:function(){$formClass=$('input[name="settings[fields][global][formClass]"]').val(),$formId=$('input[name="settings[fields][global][formId]"]').val(),$inputClass=$('input[name="settings[fields][global][inputClass]"]').val(),$inputTemplate=$('input[name="settings[fields][global][inputTemplate]"]').val(),$formClass&&this.$formContainer.find(".global-form-class").val($formClass),$formId&&this.$formContainer.find(".global-form-id").val($formId),$inputClass&&this.$formContainer.find(".global-input-class").val($inputClass),$inputTemplate&&this.$formContainer.find(".global-input-template").val($inputTemplate)},toggleModalContent:function(t){var i=this;t.preventDefault();var s=void 0,a=void 0,n=void 0;a=$(t.currentTarget),s=a.data("target"),n=$("."+s).height()+53,$(".modal-nav").removeClass("active"),$(".modal-content").removeClass("active"),a.addClass("active"),$("."+s).addClass("active"),this.$container.velocity("stop"),this.$container.velocity({height:n},"fast",function(){i.$container.css({height:n,minHeight:"auto"})})},onFormSubmit:function(t){var i=void 0;i={},t.preventDefault(),this.visible&&(this.$formClass.val()&&(i.formClass=this.$formClass.val()),this.$formId.val()&&(i.formId=this.$formId.val()),this.$inputClass.val()&&(i.inputClass=this.$inputClass.val()),this.$inputTemplate.val()&&(i.inputTemplate=this.$inputTemplate.val()),this.trigger("setFieldsSettings",{options:i}),this.hide())},onFadeOut:function(){this.base(),this.destroy()},destroy:function(){this.base(),this.$container.remove(),this.$shade.remove()},show:function(t){this.base()}}),window.LD=LD;